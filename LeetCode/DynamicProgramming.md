## åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼‰

- åŠ¨æ€è§„åˆ’ï¼ˆ`Dynamic Programming`ï¼‰

- **åŸºæœ¬æ€è·¯**ï¼Œå¯¹äºä¸€ä¸ªèƒ½ç”¨åŠ¨æ€è§„åˆ’è§£å†³çš„é—®é¢˜ï¼Œä¸€èˆ¬é‡‡ç”¨å¦‚ä¸‹æ€è·¯è§£å†³ï¼š

  1. å°†åŸé—®é¢˜åˆ’åˆ†ä¸ºè‹¥å¹² **é˜¶æ®µ**ï¼Œæ¯ä¸ªé˜¶æ®µå¯¹åº”è‹¥å¹²ä¸ªå­é—®é¢˜ï¼Œæå–è¿™äº›å­é—®é¢˜çš„ç‰¹å¾ï¼ˆç§°ä¹‹ä¸º **çŠ¶æ€**ï¼‰ï¼›
  2. å¯»æ‰¾æ¯ä¸€ä¸ªçŠ¶æ€çš„å¯èƒ½ **å†³ç­–**ï¼Œæˆ–è€…è¯´æ˜¯å„çŠ¶æ€é—´çš„ç›¸äº’è½¬ç§»æ–¹å¼ï¼ˆç”¨æ•°å­¦çš„è¯­è¨€æè¿°å°±æ˜¯ **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ï¼‰ã€‚
  3. æŒ‰é¡ºåºæ±‚è§£æ¯ä¸€ä¸ªé˜¶æ®µçš„é—®é¢˜ã€‚

- ä»¥ `ID-1` ä¸ºä¾‹ï¼Œå…¶çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š$f(i+1)=\underset{0 \leq j \leq i}{max}f(j)$

  ```go
  func lengthOfLIS(nums []int) int {
  	ans := 0
  	dp := make([]int, len(nums))
  	for i := 0; i < len(nums); i++ {
  		dp[i] = 1
  		for j := i - 1; j >= 0; j-- {
  			if nums[i] > nums[j] {
  				dp[i] = max(dp[i], dp[j]+1)
  			}
  		}
  		ans = max(ans, dp[i])
  	}
  	return ans
  }
  ```

#### è®°å¿†åŒ–æœç´¢

- è®°å¿†åŒ–æœç´¢ä¸€èˆ¬å’Œ `DFS` ç»“åˆï¼Œä¼ ç»Ÿçš„ `DFS` æ—¶é—´å¤æ‚åº¦ä¸å¤ªå¯æ§ï¼Œå°¤å…¶æ˜¯ä¸€æ¬¡æœç´¢åå…¶ä»–èŠ‚ç‚¹å¯ä»¥é‡å¤è®¿é—®ï¼Œè€Œéè¿·å®«é—®é¢˜é‚£æ ·å¯ä»¥ä¸€æ¬¡è®¿é—®åä¸éœ€è¦å†æ¬¡è®¿é—®ï¼Œå³ $O(n*m)$ ã€‚å› æ­¤ï¼Œè®°å¿†åŒ–æœç´¢å‡ºç°äº†ï¼Œ**ç”¨ç©ºé—´æ¢æ—¶é—´**ã€‚

- å¦‚ä½•å†™è®°å¿†åŒ–æœç´¢ï¼š

  1. æŠŠè¿™é“é¢˜çš„ `dp` çŠ¶æ€å’Œæ–¹ç¨‹å†™å‡ºæ¥
  2. æ ¹æ®å®ƒä»¬å†™`DFS` å‡½æ•°
  3. æ·»åŠ è®°å¿†åŒ–æ•°ç»„

- ä¾‹å¦‚åœ¨ `ID-1` ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®°å½•æœè¿‡çš„çŠ¶æ€ï¼ˆå³æ¯ä¸ªç‚¹ï¼‰ï¼š

  ```go
  func lengthOfLIS(nums []int) int {
  	mem := make([]int, len(nums))
  	var dfs func(i int) int
  	dfs = func(i int) (ret int) {
  		if mem[i] != 0 {
  			return mem[i]
  		}
  		ret++
  		for j := 0; j < i; j++ {
  			if nums[j] < nums[i] {
  				ret = max(ret, dfs(j)+1)
  			}
  		}
  		mem[i] = ret
  		return
  	}
  
  	ans := 0
  	for i := 0; i < len(nums); i++ {
  		if mem[i] == 0 {
  			ans = max(ans, dfs(i))
  		}
  	}
  	return ans
  }
  ```

#### èƒŒåŒ…DP

- èƒŒåŒ…é—®é¢˜æ˜¯ç»å…¸çš„ `dp` é¢˜ç›®ï¼ŒæŒ‡ä¸€ä¸ªå®¹é‡æœ‰é™çš„èƒŒåŒ…è£…æœ€å¤§ä»·å€¼çš„ä¸œè¥¿ï¼š

##### 0-1èƒŒåŒ…

> **0-1èƒŒåŒ…** é™åˆ¶äº†ç‰©å“æœ‰ä¸”åªæœ‰ä¸€ä»¶ï¼Œåœ¨èƒŒåŒ…æœ€å¤§è´¨é‡ä¸º $W$ çš„æƒ…å†µä¸‹ï¼Œèƒ½è£…ç‰©å“ä»·å€¼æœ€å¤§ï¼Œå½“ç„¶èƒ½æœ‰ç©ºä½ï¼š

- é¦–å…ˆè€ƒè™‘éå†åˆ°ç¬¬ $i$ ä¸ªç‰©å“æ—¶ï¼Œæœ‰ä¸¤ç§çŠ¶æ€ï¼Œå–æˆ–è€…ä¸å–ï¼Œé‚£ä¹ˆå¯¹äºé‡é‡ $0 \leq j \leq W$ ï¼Œå¯ä»¥é€šè¿‡ä¹‹å‰çš„çŠ¶æ€è·å¾—ï¼Œåˆ™æœ‰é€’æ¨æ–¹ç¨‹ï¼š
  $$
  f[i][j]=max(f[i-1][j],f[i-1][j-w_i]+v_i)
  $$

- æ˜¾ç„¶è¿™ä¸ªæ–¹ç¨‹åªä¸ $i-1$ çš„çŠ¶æ€æœ‰å…³ï¼Œå°±èƒ½é€šè¿‡æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ï¼š
  $$
  f[j]=max(f[j],f[j-w_i]+v_i)
  $$

- ä½†æ˜¯ï¼Œé—®é¢˜æ¥äº†ï¼Œå½“æˆ‘æŒ‰ç…§ $j: w_i \to W$ çš„é¡ºåºæ›´æ–°æ—¶ï¼Œä¼šå½±å“åˆ°åé¢çš„çŠ¶æ€ï¼Œå³ç‰©å“é€‰å–äº†å¤šæ¬¡ï¼Œè¿™ä¸é¢˜æ„è¿èƒŒï¼Œæ‰€ä»¥ï¼Œé‡‡ç”¨åå‘éå†çš„æ–¹å¼ $j: W \to w_i$ ã€‚

  > **åŠ¡å¿…ç‰¢è®°å¹¶ç†è§£è¿™ä¸ªè½¬ç§»æ–¹ç¨‹ï¼Œå› ä¸ºå¤§éƒ¨åˆ†èƒŒåŒ…é—®é¢˜çš„è½¬ç§»æ–¹ç¨‹éƒ½æ˜¯åœ¨æ­¤åŸºç¡€ä¸Šæ¨å¯¼å‡ºæ¥çš„ã€‚**

- **ä»£ç **ï¼š

  ```go
  for i := 0; i < len(w); i++ {
      for j := W; j >= w[i]; j-- {
          f[j] = max(f[j], f[j-w[i]]+v[i])
      }
  }
  ```

- [801. Minimum Swaps To Make Sequences Increasing](https://leetcode.cn/problems/minimum-swaps-to-make-sequences-increasing/) è¿™ä¸€é¢˜ä½œä¸ºå¼€å§‹è¿˜æŒºä¸é”™çš„ï¼Œè™½ç„¶è¿™ä¸€é¢˜ä¸çŸ¥é“ä¸ºå•¥è¿™ä¹ˆ



##### å®Œå…¨èƒŒåŒ…

> **å®Œå…¨èƒŒåŒ…** **ä¸é™åˆ¶**ç‰©å“çš„ä»¶æ•°ï¼Œåœ¨èƒŒåŒ…æœ€å¤§è´¨é‡ä¸º $W$ çš„æƒ…å†µä¸‹ï¼Œèƒ½è£…ç‰©å“ä»·å€¼æœ€å¤§ï¼Œå½“ç„¶èƒ½æœ‰ç©ºä½ï¼š

- æ¨¡ä»¿ **0-1èƒŒåŒ…** é—®é¢˜ï¼Œæˆ‘ä»¬ç»™å‡ºçš„é€’æ¨æ–¹ç¨‹ï¼š
  $$
  f[i][j]=\underset{0 \leq k \leq +\infty}{max} \{ f[i-1][j-k \times w_i]\}+k \times v_i
  $$

- ç„¶åä¼˜åŒ–è¿™ä¸ªæ–¹ç¨‹ï¼Œåœ¨æ›¿æ¢ä¸ºæ»šåŠ¨æ•°ç»„çš„æ—¶å€™æˆ‘ä»¬ä¼šå‘ç°ï¼Œæˆ‘ä»¬å¹¶ä¸å…³å¿ƒï¼Œé¡ºåºæ›´æ–°ä¸‹ï¼ˆ$j:0 \to W$ï¼‰ï¼Œæˆ–è€…è¯´å¯ä»¥åˆ©ç”¨ä¹‹å‰æ›´æ–°çš„çŠ¶æ€ï¼Œè€Œéæ‹…å¿ƒè¢«å…¶æ±¡æŸ“ï¼›æ‰€ä»¥å°±æœ‰äº†ä»¥ä¸‹æ–¹ç¨‹ï¼šï¼ˆè·Ÿ **0-1èƒŒåŒ…** å®Œå…¨ä¸€æ ·å‘¢~ï¼‰
  $$
  f[j]=max(f[j],f[j-w_i]+v_i) \qquad j:0 \to W
  $$

- **ä»£ç **ï¼š

  ```go
  for i := 0; i < len(w); i++ {
      for j := w[i]; j <= W; j++ {
          f[j] = max(f[j], f[j-w[i]]+v[i])
      }
  }
  ```



##### å¤šé‡èƒŒåŒ…

> **å¤šé‡èƒŒåŒ…** **é™åˆ¶**ç‰©å“çš„ä»¶æ•°ä¸º $k_i$ï¼Œåœ¨èƒŒåŒ…æœ€å¤§è´¨é‡ä¸º $W$ çš„æƒ…å†µä¸‹ï¼Œèƒ½è£…ç‰©å“ä»·å€¼æœ€å¤§ï¼Œå½“ç„¶èƒ½æœ‰ç©ºä½ï¼š

- åŒæ ·æ¨¡ä»¿ **0-1èƒŒåŒ…** ï¼Œæˆ‘ä»¬å¯ä»¥æœ´ç´ åœ°å†™å‡ºé€’æ¨æ–¹ç¨‹ï¼š
  $$
  f[i][j]=\underset{0 \leq k \leq k_i}{max} \{f[i-1][j-k \times w_i]\}+k \times v_i
  $$

- ä¸Šè¿°æ–¹ç¨‹çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(W \cdot \sum_{i=1}^{n}k_i)$ ã€‚å› æ­¤æˆ‘ä»¬ä» $\sum{k_i}$ å¤„ä¸‹æ‰‹ã€‚å› ä¸ºæˆ‘ä»¬è€ƒè™‘äº†å¤§é‡ç›¸åŒçš„é€‰æ‹©æ–¹æ¡ˆï¼Œæ¯”å¦‚ $k$ ä»¶ç‰©å“å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤ä¸éœ€è¦ç»„åˆæ•°çš„å¤æ‚åº¦æ¥é€‰æ‹©ï¼Œæ‰€ä»¥ï¼Œå¯ä»¥ä½¿ç”¨**äºŒè¿›åˆ¶åˆ†ç»„**çš„æ–¹æ³•è¿›è¡Œä¼˜åŒ–ã€‚

- å…·ä½“åœ°è¯´å°±æ˜¯ä»¤ $A_{i,s}\; (s \in [0,\lfloor{log_2(k_i+1)}\rfloor-1])$ åˆ†åˆ«è¡¨ç¤ºç”± $2^s$ ä¸ªå•ä¸ªç‰©å“â€œæ†ç»‘â€è€Œæˆçš„å¤§ç‰©å“ã€‚ç‰¹æ®Šåœ°ï¼Œè‹¥ $k_i+1$ **ä¸æ˜¯** $2$ çš„æ•´æ•°æ¬¡å¹‚ï¼Œåˆ™éœ€è¦åœ¨æœ€åæ·»åŠ ä¸€ä¸ªç”± $k_i-2^{\lfloor{log_2(k_i+1)}\rfloor-1}$ ä¸ªå•ä¸ªç‰©å“â€œæ†ç»‘â€è€Œæˆçš„å¤§ç‰©å“ç”¨äºè¡¥è¶³ã€‚æ—¶é—´å¤æ‚åº¦é™ä¸ºï¼š$O(W \cdot \sum_{i=1}^n log_2k_i)$



##### äºŒç»´è´¹ç”¨èƒŒåŒ…

> æœ‰ $n$ ä¸ªä»»åŠ¡éœ€è¦å®Œæˆï¼Œå®Œæˆç¬¬ $i$ ä¸ªä»»åŠ¡éœ€è¦èŠ±è´¹ $t_i$ åˆ†é’Ÿï¼Œäº§ç”Ÿ $c_i$ å…ƒçš„å¼€æ”¯ã€‚
>
> ç°åœ¨æœ‰ $T$ åˆ†é’Ÿæ—¶é—´ï¼Œ$C$ å…ƒé’±æ¥å¤„ç†è¿™äº›ä»»åŠ¡ï¼Œæ±‚æœ€å¤šèƒ½å®Œæˆå¤šå°‘ä»»åŠ¡ã€‚

- è¿˜æ˜¯ **0-1èƒŒåŒ…** çš„é—®é¢˜ï¼Œæˆ‘ä»¬ç›´æ¥ä»**ä¼˜åŒ–å**çš„é€’æ¨æ–¹ç¨‹å¼€å§‹ï¼š
  $$
  f[i][j]=max(f[i][j],f[i-c[k]][j-t[k]]+1) \qquad 
  \begin{cases}
  	i:C \to c_i \\ 
  	j:T \to t_i \\
  \end{cases}
  $$



##### åˆ†ç»„èƒŒåŒ…

> æœ‰ $n$ ä»¶ç‰©å“å’Œä¸€ä¸ªå¤§å°ä¸º $m$ çš„èƒŒåŒ…ï¼Œç¬¬ $i$ ä¸ªç‰©å“çš„ä»·å€¼ä¸º $w_i$ ï¼Œä½“ç§¯ä¸º $v_i$ ã€‚åŒæ—¶ï¼Œæ¯ä¸ªç‰©å“å±äºä¸€ä¸ªç»„ï¼ŒåŒç»„å†…æœ€å¤šåªèƒ½é€‰æ‹©ä¸€ä¸ªç‰©å“ï¼Œæ±‚èƒŒåŒ…èƒ½è£…è½½ç‰©å“çš„æœ€å¤§æ€»ä»·å€¼ã€‚

- è¿™ç§é¢˜æ€ä¹ˆæƒ³å‘¢ï¼Ÿå…¶å®æ˜¯ä»ã€Œåœ¨æ‰€æœ‰ç‰©å“ä¸­é€‰æ‹©ä¸€ä»¶ã€å˜æˆäº†ã€Œä»å½“å‰ç»„ä¸­é€‰æ‹©ä¸€ä»¶ã€ï¼Œäºæ˜¯å°±å¯¹æ¯ä¸€ç»„è¿›è¡Œä¸€æ¬¡ 0-1 èƒŒåŒ…å°±å¯ä»¥äº†ã€‚

- **ä»£ç **ï¼š

  ```go
  for k:=0; k<len(package); k++ {
      for i:=w; i>=0; i-- {
          for j:=0; j<len(package[k]); j++ {
              if i>=package[k][j].w {
                  dp[i]=max(dp[i],dp[i-package[i][j].w]+package[k][j].v)
              }
          }
      }
  } 
  ```

  > è¿™é‡Œè¦æ³¨æ„ï¼š**ä¸€å®šä¸èƒ½æé”™å¾ªç¯é¡ºåº**ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯æ­£ç¡®æ€§ã€‚



#### åŒºé—´DP

-  **åŒºé—´ç±»åŠ¨æ€è§„åˆ’**æ˜¯çº¿æ€§åŠ¨æ€è§„åˆ’çš„æ‰©å±•ï¼Œå®ƒåœ¨åˆ†é˜¶æ®µåœ°åˆ’åˆ†é—®é¢˜æ—¶ï¼Œä¸é˜¶æ®µä¸­å…ƒç´ å‡ºç°çš„é¡ºåºå’Œç”±å‰ä¸€é˜¶æ®µçš„å“ªäº›å…ƒç´ åˆå¹¶è€Œæ¥æœ‰å¾ˆå¤§çš„å…³ç³»ã€‚
-  ä»¤çŠ¶æ€ $f[i][j]$ è¡¨ç¤ºå°†ä¸‹æ ‡ä½ç½® $i$ åˆ° $j$ çš„æ‰€æœ‰å…ƒç´ åˆå¹¶èƒ½è·å¾—çš„ä»·å€¼çš„æœ€å¤§å€¼ï¼Œé‚£ä¹ˆ $f[i][j]=max\{f[i][k]+f[k+1][j]+cost\}$ ï¼Œ $cost$ ä¸ºå°†è¿™ä¸¤ç»„å…ƒç´ åˆå¹¶èµ·æ¥çš„ä»£ä»·ã€‚
-  åŒºé—´ `dp` æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š
   - **åˆå¹¶**ï¼šå³å°†ä¸¤ä¸ªæˆ–å¤šä¸ªéƒ¨åˆ†è¿›è¡Œæ•´åˆï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åè¿‡æ¥ï¼›
   - **ç‰¹å¾**ï¼šèƒ½å°†é—®é¢˜åˆ†è§£ä¸ºèƒ½ä¸¤ä¸¤åˆå¹¶çš„å½¢å¼ï¼›
   - **æ±‚è§£**ï¼šå¯¹æ•´ä¸ªé—®é¢˜è®¾æœ€ä¼˜å€¼ï¼Œæšä¸¾åˆå¹¶ç‚¹ï¼Œå°†é—®é¢˜åˆ†è§£ä¸ºå·¦å³ä¸¤ä¸ªéƒ¨åˆ†ï¼Œæœ€ååˆå¹¶ä¸¤ä¸ªéƒ¨åˆ†çš„æœ€ä¼˜å€¼å¾—åˆ°åŸé—®é¢˜çš„æœ€ä¼˜å€¼ã€‚

> åœ¨ä¸€ä¸ªç¯ä¸Šæœ‰ $n$ ä¸ªæ•° $a_1,a_2,\dots,a_n$ï¼Œè¿›è¡Œ $n-1$ æ¬¡åˆå¹¶æ“ä½œï¼Œæ¯æ¬¡æ“ä½œå°†ç›¸é‚»çš„ä¸¤å †åˆå¹¶æˆä¸€å †ï¼Œèƒ½è·å¾—æ–°çš„ä¸€å †ä¸­çš„çŸ³å­æ•°é‡çš„å’Œçš„å¾—åˆ†ï¼Œä½ éœ€è¦æœ€å¤§åŒ–ä½ çš„å¾—åˆ†ã€‚

- é¦–å…ˆè€ƒè™‘**é“¾ä¸Šè€Œä¸æ˜¯ç¯ä¸Š**çš„æƒ…å†µï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å¾ˆç®€å•å†™å‡ºï¼š
  $$
  f[i][j]=\underset{i\leq k \leq j-1}{max}\{f[i][k]+f[k+1][j]\}
  $$

- é‚£ä¹ˆå¤„ç†ç¯ä¸Šå‘¢ï¼Œæˆ‘ä»¬å¯ä»¥å¤åˆ¶æ•´ä¸ªé“¾ï¼Œå˜æˆ $2 \times n$ ä¸ªï¼Œå…¶ä¸­ç¬¬ $i$ å †ä¸ç¬¬ $n+i$ å †ç›¸åŒï¼Œç”¨åŠ¨æ€è§„åˆ’æ±‚è§£åï¼Œå– $f[1][n],f[2][n+2], \dots ,f[n-1][2n-2]$ä¸­çš„æœ€ä¼˜å€¼ï¼Œä¸ºæœ€åçš„ç­”æ¡ˆã€‚

##### ä¾‹é¢˜

- ä»¥`ID-4` [664. Strange Printer](https://leetcode.cn/problems/strange-printer/)  ä¸ºä¾‹ï¼Œç±»ä¼¼äº `INSERT` æ¨¡å¼åˆ‡æ¢æˆè¦†ç›–ï¼Œæ±‚æœ€å°çš„å†™æ¬¡æ•°ï¼›ä¸éš¾å‘ç°ï¼Œå¯ä»¥ä½¿ç”¨åŒºé—´DPåˆ†å‰²æˆå­ä¸²è®¡ç®—ï¼Œå…¶**è½¬ç§»æ–¹ç¨‹**ï¼š
  $$
  dp[i][j]=
  \begin{cases}
  dp[i][j-1] & s[i]=s[j] \\
  \min_{i \leq k \leq j-1}dp[i][k]+dp[k+1][j] & s[i] \neq s[j] \\
  \end{cases}
  $$
  æ„Ÿè§‰åŸç†é€šäº†ï¼Œè¿™é¢˜ä¸å€¼å¾— `hard` ğŸ¤”



#### DAGæœ‰å‘æ— ç¯å›¾DP

1. **å»ºç«‹DAG**ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä¸€ç§å§¿æ€çš„æ–¹å— $(h,(a,b))$ ï¼Œå…¶ä¸­ $(a.b)$ æ˜¯æ— åºçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½å»ºç«‹ä¸€ä¸ªDAGäº†ã€‚æˆ‘ä»¬å°†ä»¥ä¸¤ç§æ–¹å—ä¸ºä¾‹ï¼š$(31,41,59)$ å’Œ $(33,83,27)$

   ![img](images/dag-babylon.png)

   å›¾ä¸­é»„è‰²è™šçº¿æ¡†è¡¨ç¤ºçš„æ˜¯é‡å¤è®¡ç®—éƒ¨åˆ†ï¼Œå¯ä»¥é‡‡ç”¨**è®°å¿†åŒ–æœç´¢**çš„æ–¹æ³•æ¥é¿å…é‡å¤è®¡ç®—ã€‚

2. ä¸‹é¢æˆ‘ä»¬å¼€å§‹è€ƒè™‘è½¬ç§»æ–¹ç¨‹ï¼Œè®¾ $d(i,r)$ è¡¨ç¤ºç¬¬ $i$ å—ç –å—åœ¨æœ€ä¸Šé¢ï¼Œä¸”é‡‡ç”¨ç¬¬ $r$ ç§å †å æ–¹å¼çš„æœ€å¤§é«˜åº¦ã€‚é‚£ä¹ˆæœ‰å¦‚ä¸‹çš„è½¬ç§»æ–¹ç¨‹ï¼š
   $$
   d(i,r)=max\{d(j,r')+h\}
   $$



#### æ ‘å½¢DP

- æ ‘å½¢ DPï¼Œå³åœ¨æ ‘ä¸Šè¿›è¡Œçš„ DPã€‚ç”±äºæ ‘å›ºæœ‰çš„é€’å½’æ€§è´¨ï¼Œæ ‘å½¢ DP ä¸€èˆ¬éƒ½æ˜¯é€’å½’è¿›è¡Œçš„ã€‚

> æŸå¤§å­¦æœ‰ $n$ ä¸ªèŒå‘˜ï¼Œç¼–å·ä¸º $1 \sim N$ ã€‚ä»–ä»¬ä¹‹é—´æœ‰ä»å±å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–ä»¬çš„å…³ç³»å°±åƒä¸€æ£µ**ä»¥æ ¡é•¿ä¸ºæ ¹**çš„æ ‘ï¼Œçˆ¶ç»“ç‚¹å°±æ˜¯å­ç»“ç‚¹çš„ç›´æ¥ä¸Šå¸ã€‚ç°åœ¨æœ‰ä¸ªå‘¨å¹´åº†å®´ä¼šï¼Œå®´ä¼šæ¯é‚€è¯·æ¥ä¸€ä¸ªèŒå‘˜éƒ½ä¼šå¢åŠ ä¸€å®šçš„å¿«ä¹æŒ‡æ•° ï¼Œä½†æ˜¯å‘¢ï¼Œå¦‚æœæŸä¸ªèŒå‘˜çš„ç›´æ¥ä¸Šå¸æ¥å‚åŠ èˆä¼šäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªèŒå‘˜å°±æ— è®ºå¦‚ä½•ä¹Ÿä¸è‚¯æ¥å‚åŠ èˆä¼šäº†ã€‚æ‰€ä»¥ï¼Œè¯·ä½ ç¼–ç¨‹è®¡ç®—ï¼Œé‚€è¯·å“ªäº›èŒå‘˜å¯ä»¥ä½¿å¿«ä¹æŒ‡æ•°æœ€å¤§ï¼Œæ±‚æœ€å¤§çš„å¿«ä¹æŒ‡æ•°ã€‚

1. æˆ‘ä»¬è®¾ $f(i,0/1)$ ä»£è¡¨ä»¥ $i$ ä¸ºæ ¹çš„å­æ ‘çš„æœ€ä¼˜è§£ï¼ˆç¬¬äºŒç»´çš„å€¼ä¸º $0$ ä»£è¡¨ $i$ ä¸å‚åŠ èˆä¼šçš„æƒ…å†µï¼Œ$1$ ä»£è¡¨ $i$ å‚åŠ èˆä¼šçš„æƒ…å†µï¼‰ã€‚å¯¹äºæ¯ä¸ªçŠ¶æ€ï¼Œéƒ½å­˜åœ¨ä¸¤ç§å†³ç­–ï¼ˆå…¶ä¸­ä¸‹é¢çš„ $x$ éƒ½æ˜¯ $i$ çš„å„¿å­ï¼‰ï¼š
   $$
   \begin{align}
   f[i][0] &= \sum \max\{f[x][1],f[x][0]\} 	\\
   f[i][1] &= \sum f[x][0] + a_i				\\
   \end{align}
   $$

2. é€šè¿‡ `DFS` ï¼Œåœ¨è¿”å›ä¸Šä¸€å±‚æ—¶æ›´æ–°å½“å‰èŠ‚ç‚¹çš„æœ€ä¼˜è§£ã€‚

##### ä¾‹é¢˜

1. ä»¥ `ID-3` [LCP 64. äºŒå‰æ ‘ç¯é¥°](https://leetcode.cn/problems/U7WvvU/) ä¸ºä¾‹ï¼Œå¯¹äºæ¯ä¸ªæ ¹èŠ‚ç‚¹ $i$ï¼Œå¯è§çš„å‡ ä¸ªçŠ¶æ€åˆ†åˆ«ä¸ºï¼š

   - ä¸å—ä»»ä½•ç¥–å…ˆèŠ‚ç‚¹çš„å½±å“ï¼Œæˆ‘ä»¬å¯ä»¥è®°ä¸º $00$ï¼›

   - å—åˆ°**å¼€å…³2**çš„å½±å“ï¼Œè®°ä¸º $01$ï¼›

   - å—åˆ°**å¼€å…³3**çš„å½±å“ï¼Œè®°ä¸º $10$ï¼›

   - å—åˆ°**å¼€å…³2**å’Œ**å¼€å…³3**çš„å½±å“ï¼Œè®°ä¸º $11$ï¼›

2. æˆ‘ä»¬éœ€è¦æŠŠæ‰€æœ‰ç¯éƒ½å…³ä¸Šï¼Œæ‰€ä»¥æœ€åçš„çŠ¶æ€éƒ½åº”è¯¥æ˜¯å…³ç¯ï¼›å½“å‰èŠ‚ç‚¹çŠ¶æ€ä¸º $1$ æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€æ¬¡å¼€å…³å’Œä¸‰æ¬¡å¼€å…³æ¥æ”¹å˜çŠ¶æ€ï¼›çŠ¶æ€ä¸º $0$ æ—¶ä¹Ÿç±»ä¼¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å†™**è½¬ç§»æ–¹ç¨‹**å’Œ `DFS` äº†ï¼š

   ```go
   var dfs func(label int, node *TreeNode, state byte) int
   dfs = func(label int, node *TreeNode, state byte) int {
       ...
       tmp := state
       // now off
       if switch_off {
           // do nothing
           ...
           // switch 1+2
           ...
           // switch 1+3
           ...
           // switch 2+3
           ...
       } else { // now on
           // switch 1
           ...
           // switch 2
           ...
           // switch 3
           ...
           // switch 1+2+3
           ...
       }
       total[label][tmp] = ret
       return total[label][tmp]
   }
   
   a := dfs(1, root, 0)
   ```

   $$
   f[u][state]=\min\{f[u*2][state_{next}]+f[u*2+1][state_{next}]+a_{switch}\}
   $$

   å…¶ä¸­ï¼Œ$u$ ä¸ºå½“å‰èŠ‚ç‚¹ç¼–å·ï¼Œ$state$ ä¸ºå½“å‰çŠ¶æ€ï¼Œ$state_{next}$ ä¸ºä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œè¿™ä¸å¼€å…³é€‰æ‹©æœ‰å…³ï¼ŒåŒæ—¶ä¹Ÿè¦åŠ ä¸Š $a_{switch}$ è¿™ä¸ªçŠ¶æ€è½¬æ¢æ¶ˆè€—ï¼›ğŸ˜€ï¼ˆæˆåŠŸæ‰“å¡ç¬¬ä¸€é“æ ‘å½¢DPäº†å±äºæ˜¯ï¼Œå¯æƒœæ²¡åœ¨LCPä¹‹å‰å­¦å®Œ~ï¼‰



##### æ ‘ä¸ŠèƒŒåŒ…

> ç°åœ¨æœ‰ $n$ é—¨è¯¾ç¨‹ï¼Œç¬¬ $i$ é—¨è¯¾ç¨‹çš„å­¦åˆ†ä¸º $a_i$ï¼Œæ¯é—¨è¯¾ç¨‹æœ‰é›¶é—¨æˆ–ä¸€é—¨å…ˆä¿®è¯¾ï¼Œæœ‰å…ˆä¿®è¯¾çš„è¯¾ç¨‹éœ€è¦å…ˆå­¦å®Œå…¶å…ˆä¿®è¯¾ï¼Œæ‰èƒ½å­¦ä¹ è¯¥è¯¾ç¨‹ã€‚ä¸€ä½å­¦ç”Ÿè¦å­¦ä¹  $m$ é—¨è¯¾ç¨‹ï¼Œæ±‚å…¶èƒ½è·å¾—çš„æœ€å¤šå­¦åˆ†æ•°ã€‚

1. æ¯é—¨è¯¾æœ€å¤šåªæœ‰ä¸€é—¨å…ˆä¿®è¯¾çš„ç‰¹ç‚¹ï¼Œä¸æœ‰æ ¹æ ‘ä¸­ä¸€ä¸ªç‚¹æœ€å¤šåªæœ‰ä¸€ä¸ªçˆ¶äº²ç»“ç‚¹çš„ç‰¹ç‚¹ç±»ä¼¼ï¼Œå› æ­¤å¯ä»¥æƒ³åˆ°æ ¹æ®è¿™ä¸€æ€§è´¨å»ºæ ‘ã€‚

2. å¦‚æœæ‰€æœ‰è¯¾ç¨‹ç»„æˆäº†ä¸€ä¸ªæ£®æ—çš„ç»“æ„ï¼Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬å¯ä»¥æ–°å¢ä¸€é—¨ å­¦åˆ†çš„è¯¾ç¨‹ï¼ˆè®¾è¿™ä¸ªè¯¾ç¨‹çš„ç¼–å·ä¸º $-1$ï¼‰ï¼Œä½œä¸ºæ‰€æœ‰æ— å…ˆä¿®è¯¾è¯¾ç¨‹çš„å…ˆä¿®è¯¾ï¼Œè¿™æ ·æˆ‘ä»¬å°±å°†æ£®æ—å˜æˆäº†ä¸€æ£µä»¥ $-1$ å·è¯¾ç¨‹ä¸ºæ ¹çš„æ ‘ã€‚

3. æ¥ç€æ¨¡ä»¿åŸºç¡€çš„æ ‘å½¢DPå’ŒèƒŒåŒ…é—®é¢˜ï¼Œæå‡ºé€’å½’è¿‡ç¨‹ï¼Œè®¾ $f[u][i][j]$ è¡¨ç¤ºç‚¹ $u$ ä¸ºæ ¹çš„å­æ ‘ä¸­ï¼Œå·²ç»éå†äº† $u$ çš„å‰ $i$ æ£µå­æ ‘ï¼Œé€‰äº† $j$ é—¨è¯¾ç¨‹çš„æœ€å¤§å­¦åˆ†ï¼Œè®°ç‚¹ $u$ çš„å„¿å­ä¸ªæ•°ä¸º $s_u$ï¼Œä»¥ $x$ ä¸ºæ ¹çš„å­æ ‘å¤§å°ä¸º $size_x$ï¼Œå¯ä»¥å†™å‡ºä¸‹é¢çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š
   $$
   f[u][i][j]=\underset{v,k \leq j,k \leq size_v}{\max}\{f[u][i-1][j-k]+f[v][s_v][k]\}
   $$

4. **å‚è€ƒä»£ç **ï¼š

   ```c++
   #include <algorithm>
   #include <cstdio>
   #include <vector>
   using namespace std;
   int f[305][305], s[305], n, m;
   vector<int> e[305];
   
   int dfs(int u) {
     int p = 1;
     f[u][1] = s[u];
     for (auto v : e[u]) {
       int siz = dfs(v);
       // æ³¨æ„ä¸‹é¢ä¸¤é‡å¾ªç¯çš„ä¸Šç•Œå’Œä¸‹ç•Œ
       // åªè€ƒè™‘å·²ç»åˆå¹¶è¿‡çš„å­æ ‘ï¼Œä»¥åŠé€‰çš„è¯¾ç¨‹æ•°è¶…è¿‡ m+1 çš„çŠ¶æ€æ²¡æœ‰æ„ä¹‰
       for (int i = min(p, m + 1); i; i--)
         for (int j = 1; j <= siz && i + j <= m + 1; j++)
           f[u][i + j] = max(f[u][i + j], f[u][i] + f[v][j]);  // è½¬ç§»æ–¹ç¨‹
       p += siz;
     }
     return p;
   }
   
   int main() {
     scanf("%d%d", &n, &m);
     for (int i = 1; i <= n; i++) {
       int k;
       scanf("%d%d", &k, &s[i]);
       e[k].push_back(i);
     }
     dfs(0);
     printf("%d", f[0][m + 1]);
     return 0;
   }
   ```

5. ï¼ˆæœ‰ç©ºè‡ªå·±å†™ä¸ª Go çš„...ï¼‰



#### æ¢æ ¹DP

- æ ‘å½¢ DP ä¸­çš„æ¢æ ¹ DP é—®é¢˜åˆè¢«ç§°ä¸ºäºŒæ¬¡æ‰«æï¼Œé€šå¸¸ä¸ä¼šæŒ‡å®šæ ¹ç»“ç‚¹ï¼Œå¹¶ä¸”æ ¹ç»“ç‚¹çš„å˜åŒ–ä¼šå¯¹ä¸€äº›å€¼ï¼Œä¾‹å¦‚å­ç»“ç‚¹æ·±åº¦å’Œã€ç‚¹æƒå’Œç­‰äº§ç”Ÿå½±å“ã€‚

- é€šå¸¸éœ€è¦ä¸¤æ¬¡ `DFS`ï¼Œç¬¬ä¸€æ¬¡ `DFS` é¢„å¤„ç†è¯¸å¦‚æ·±åº¦ï¼Œç‚¹æƒå’Œä¹‹ç±»çš„ä¿¡æ¯ï¼Œåœ¨ç¬¬äºŒæ¬¡ `DFS` å¼€å§‹è¿è¡Œæ¢æ ¹åŠ¨æ€è§„åˆ’ã€‚

> ç»™å®šä¸€ä¸ª $n$ ä¸ªç‚¹çš„æ ‘ï¼Œè¯·æ±‚å‡ºä¸€ä¸ªç»“ç‚¹ï¼Œä½¿å¾—ä»¥è¿™ä¸ªç»“ç‚¹ä¸ºæ ¹æ—¶ï¼Œæ‰€æœ‰ç»“ç‚¹çš„æ·±åº¦ä¹‹å’Œæœ€å¤§ã€‚

1. ä¸å¦¨ä»¤ $u$ ä¸ºå½“å‰ç»“ç‚¹ï¼Œ ä¸ºå½“å‰ç»“ç‚¹çš„å­ç»“ç‚¹ã€‚é¦–å…ˆéœ€è¦ç”¨ $s_i$ æ¥è¡¨ç¤ºä»¥ $i$ ä¸ºæ ¹çš„å­æ ‘ä¸­çš„ç»“ç‚¹ä¸ªæ•°ï¼Œå¹¶ä¸”æœ‰ $s_u=1+\sum s_v$ ã€‚æ˜¾ç„¶éœ€è¦ä¸€æ¬¡ `DFS` æ¥è®¡ç®—æ‰€æœ‰çš„ $s_i$ ï¼Œè¿™æ¬¡çš„ `DFS` å°±æ˜¯é¢„å¤„ç†ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä»¥æŸä¸ªç»“ç‚¹ä¸ºæ ¹æ—¶å…¶å­æ ‘ä¸­çš„ç»“ç‚¹æ€»æ•°ã€‚

2. è€ƒè™‘çŠ¶æ€è½¬ç§»ï¼Œè¿™é‡Œå°±æ˜¯ä½“ç°ï¼‚æ¢æ ¹ï¼‚çš„åœ°æ–¹äº†ã€‚ä»¤ $f_u$ ä¸ºä»¥ $u$ ä¸ºæ ¹æ—¶ï¼Œæ‰€æœ‰ç»“ç‚¹çš„æ·±åº¦ä¹‹å’Œã€‚

3. $f_v \leftarrow f_u$ å¯ä»¥ä½“ç°æ¢æ ¹ï¼Œå³ä»¥ $u$ ä¸ºæ ¹è½¬ç§»åˆ°ä»¥ $v$ ä¸ºæ ¹ã€‚æ˜¾ç„¶åœ¨æ¢æ ¹çš„è½¬ç§»è¿‡ç¨‹ä¸­ï¼Œä»¥ $u$ ä¸ºæ ¹æˆ–ä»¥ $v$ ä¸ºæ ¹ä¼šå¯¼è‡´å…¶å­æ ‘ä¸­çš„ç»“ç‚¹çš„æ·±åº¦äº§ç”Ÿæ”¹å˜ã€‚å…·ä½“è¡¨ç°ä¸ºï¼š

   - æ‰€æœ‰åœ¨ $v$ çš„å­æ ‘ä¸Šçš„ç»“ç‚¹æ·±åº¦éƒ½å‡å°‘äº† $1$ï¼Œé‚£ä¹ˆæ€»æ·±åº¦å’Œå°±å‡å°‘äº† $s_v$ ï¼›

   - æ‰€æœ‰ä¸åœ¨ $v$ çš„å­æ ‘ä¸Šçš„ç»“ç‚¹æ·±åº¦éƒ½å¢åŠ äº† $1$ï¼Œé‚£ä¹ˆæ€»æ·±åº¦å’Œå°±å¢åŠ äº† $n-s_v$ ï¼›

4. æ ¹æ®è¿™ä¸¤ä¸ªæ¡ä»¶å°±å¯ä»¥æ¨å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ $f_v=f_u-s_v+n-s_v=f_u+n-2 \times s_v$ ã€‚

5. äºæ˜¯åœ¨ç¬¬äºŒæ¬¡ `DFS` éå†æ•´æ£µæ ‘å¹¶çŠ¶æ€è½¬ç§» $f_v=f_u+n-2 \times s_v$ ï¼Œé‚£ä¹ˆå°±èƒ½æ±‚å‡ºä»¥æ¯ä¸ªç»“ç‚¹ä¸ºæ ¹æ—¶çš„æ·±åº¦å’Œäº†ï¼Œæœ€ååªéœ€è¦éå†ä¸€æ¬¡æ‰€æœ‰æ ¹ç»“ç‚¹æ·±åº¦å’Œå°±å¯ä»¥æ±‚å‡ºç­”æ¡ˆã€‚



#### çŠ¶å‹DP

- çŠ¶å‹ DP æ˜¯åŠ¨æ€è§„åˆ’çš„ä¸€ç§ï¼Œé€šè¿‡å°†çŠ¶æ€å‹ç¼©ä¸ºæ•´æ•°æ¥è¾¾åˆ°ä¼˜åŒ–è½¬ç§»çš„ç›®çš„ã€‚

> åœ¨ $N \times N$ çš„æ£‹ç›˜é‡Œé¢æ”¾ $K$ ä¸ªå›½ç‹ï¼ˆ$1 \leq N \leq 9, 1 \leq K \leq N \times N$ï¼‰ï¼Œä½¿ä»–ä»¬äº’ä¸æ”»å‡»ï¼Œå…±æœ‰å¤šå°‘ç§æ‘†æ”¾æ–¹æ¡ˆã€‚å›½ç‹èƒ½æ”»å‡»åˆ°å®ƒä¸Šä¸‹å·¦å³ï¼Œä»¥åŠå·¦ä¸Šå·¦ä¸‹å³ä¸Šå³ä¸‹å…«ä¸ªæ–¹å‘ä¸Šé™„è¿‘çš„å„ä¸€ä¸ªæ ¼å­ï¼Œå…± $8$ ä¸ªæ ¼å­ã€‚

1. è®¾ $f[i][j][l]$ è¡¨ç¤ºå‰ $i$ è¡Œï¼Œç¬¬ $i$ è¡Œçš„çŠ¶æ€ä¸º $j$ ï¼Œä¸”æ£‹ç›˜ä¸Šå·²ç»æ”¾ç½® $l$ ä¸ªå›½ç‹æ—¶çš„åˆæ³•æ–¹æ¡ˆæ•°ã€‚$x$ ä¸ºä¸Šä¸€è¡ŒæŸä¸ªçŠ¶æ€ï¼Œ$sta(j)$ è¡¨ç¤ºçŠ¶æ€ $j$é‡Œçš„å›½ç‹ä¸ªæ•°ï¼Œé‚£ä¹ˆ**çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ï¼š
   $$
   f[i][j][l]=\sum f[i-1][x][l-sta(j)]
   $$

- [LCP 69. Hello LeetCode!](https://leetcode.cn/problems/rMeRt2/) çŠ¶æ€å‹ç¼©å—è‹¦é¢˜ï¼Œå¯ä»¥æ„Ÿå—ä¸€ä¸‹ï¼Œè¶…è¿‡æ ‡å‡†çš„ `HARD` é¢˜ã€‚



#### æ•°ä½DP

- æ•°ä½æ˜¯æŒ‡æŠŠä¸€ä¸ªæ•°å­—æŒ‰ç…§ä¸ªã€åã€ç™¾ã€åƒç­‰ç­‰ä¸€ä½ä¸€ä½åœ°æ‹†å¼€ï¼Œå…³æ³¨å®ƒæ¯ä¸€ä½ä¸Šçš„æ•°å­—ã€‚å¦‚æœæ‹†çš„æ˜¯åè¿›åˆ¶æ•°ï¼Œé‚£ä¹ˆæ¯ä¸€ä½æ•°å­—éƒ½æ˜¯ $0 \sim 9$ï¼Œå…¶ä»–è¿›åˆ¶å¯ç±»æ¯”åè¿›åˆ¶ã€‚**æ•°ä½ DP**ç”¨æ¥è§£å†³è¿™ä¸€ç±»ç‰¹å®šé—®é¢˜ï¼Œè¿™ç§é—®é¢˜æ¯”è¾ƒå¥½è¾¨è®¤ï¼Œä¸€èˆ¬å…·æœ‰è¿™å‡ ä¸ªç‰¹å¾ï¼š

  1. è¦æ±‚ç»Ÿè®¡æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æ•°çš„æ•°é‡ï¼ˆå³ï¼Œæœ€ç»ˆç›®çš„ä¸ºè®¡æ•°ï¼‰ï¼›
  2. è¿™äº›æ¡ä»¶ç»è¿‡è½¬åŒ–åå¯ä»¥ä½¿ç”¨ã€Œ**æ•°ä½**ã€çš„æ€æƒ³å»ç†è§£å’Œåˆ¤æ–­ï¼›
  3. è¾“å…¥ä¼šæä¾›ä¸€ä¸ªæ•°å­—åŒºé—´ï¼ˆæœ‰æ—¶ä¹Ÿåªæä¾›ä¸Šç•Œï¼‰æ¥ä½œä¸ºç»Ÿè®¡çš„é™åˆ¶ï¼›
  4. ä¸Šç•Œå¾ˆå¤§ï¼ˆæ¯”å¦‚ $10^{18}$ï¼‰ï¼Œæš´åŠ›æšä¸¾éªŒè¯ä¼šè¶…æ—¶ã€‚

- **åŸºæœ¬åŸç†**ï¼š

  - è€ƒè™‘äººç±»è®¡æ•°çš„æ–¹å¼ï¼Œæœ€æœ´ç´ çš„è®¡æ•°å°±æ˜¯ä»å°åˆ°å¤§å¼€å§‹ä¾æ¬¡åŠ ä¸€ã€‚ä½†æˆ‘ä»¬å‘ç°å¯¹äºä½æ•°æ¯”è¾ƒå¤šçš„æ•°ï¼Œè¿™æ ·çš„è¿‡ç¨‹ä¸­æœ‰è®¸å¤šé‡å¤çš„éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œä» 7000 æ•°åˆ° 7999ã€ä» 8000 æ•°åˆ° 8999ã€å’Œä» 9000 æ•°åˆ° 9999 çš„è¿‡ç¨‹éå¸¸ç›¸ä¼¼ï¼Œå®ƒä»¬éƒ½æ˜¯åä¸‰ä½ä» 000 å˜åˆ° 999ï¼Œä¸ä¸€æ ·çš„åœ°æ–¹åªæœ‰åƒä½è¿™ä¸€ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›è¿‡ç¨‹å½’å¹¶èµ·æ¥ï¼Œå°†è¿™äº›è¿‡ç¨‹ä¸­äº§ç”Ÿçš„è®¡æ•°ç­”æ¡ˆä¹Ÿéƒ½å­˜åœ¨ä¸€ä¸ªé€šç”¨çš„æ•°ç»„é‡Œã€‚æ­¤æ•°ç»„æ ¹æ®é¢˜ç›®å…·ä½“è¦æ±‚è®¾ç½®çŠ¶æ€ï¼Œç”¨é€’æ¨æˆ– DP çš„æ–¹å¼è¿›è¡ŒçŠ¶æ€è½¬ç§»ã€‚

  - æ•°ä½ DP ä¸­é€šå¸¸ä¼šåˆ©ç”¨å¸¸è§„è®¡æ•°é—®é¢˜æŠ€å·§ï¼Œæ¯”å¦‚æŠŠä¸€ä¸ªåŒºé—´å†…çš„ç­”æ¡ˆæ‹†æˆä¸¤éƒ¨åˆ†ç›¸å‡ï¼ˆå³
    $$
    ans_{[l,r]}=ans_{[0,r]}-ans_{[0,l-1]}
    $$

  - é‚£ä¹ˆæœ‰äº†é€šç”¨ç­”æ¡ˆæ•°ç»„ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç»Ÿè®¡ç­”æ¡ˆã€‚ç»Ÿè®¡ç­”æ¡ˆå¯ä»¥é€‰æ‹©è®°å¿†åŒ–æœç´¢ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å¾ªç¯è¿­ä»£é€’æ¨ã€‚ä¸ºäº†ä¸é‡ä¸æ¼åœ°ç»Ÿè®¡æ‰€æœ‰ä¸è¶…è¿‡ä¸Šé™çš„ç­”æ¡ˆï¼Œè¦ä»é«˜åˆ°ä½æšä¸¾æ¯ä¸€ä½ï¼Œå†è€ƒè™‘æ¯ä¸€ä½éƒ½å¯ä»¥å¡«å“ªäº›æ•°å­—ï¼Œæœ€ååˆ©ç”¨é€šç”¨ç­”æ¡ˆæ•°ç»„ç»Ÿè®¡ç­”æ¡ˆã€‚
  
- **ä¾‹é¢˜**ï¼šï¼ˆ[902. Numbers At Most N Given Digit Set](https://leetcode.cn/problems/numbers-at-most-n-given-digit-set/)ï¼Œç»™å®šéé›¶æ•°å­—æœ€å¤šèƒ½ç»„æˆå¤šå°‘ä¸ªä¸è¶…è¿‡ `N` çš„æ•°å­—ï¼‰

  ç”šè‡³å¯ä»¥ä¸ç”¨æ˜¾å¼ DP ï¼Œæˆ‘ä»¬å¯ä»¥å‡è£…æœ‰ä¸ªâ€œ0ç»´â€ DP ï¼Œ**ä¸»è¦æ€æƒ³**æ˜¯ç”±äºä¸èƒ½è¶…è¿‡ `N` ï¼Œé‚£ä¹ˆé€‰å–æ­£å¥½å°äº `N` çš„æ•°å‰©ä¸‹éƒ¨åˆ†å°±ä»»é€‰äº†ï¼›å¦‚æœæ­£å¥½ç­‰äº `N` çš„è¯¥æ•°ä½ï¼Œåˆ™çœ‹å‘ä¸‹ä¸€ä¸ªæ•°ä½ã€‚æ‰¾æ­£å¥½å°äºç­‰äºå¯ä»¥ç”¨**äºŒåˆ†æŸ¥æ‰¾**ç®€åŒ–ï¼Œéœ€è¦æ³¨æ„å¼€å¤´æ˜¯å¯ä»¥ä¸º `0` çš„ä½†æ˜¯è¿™æ¬¡æ•°å­—é‡Œä¸æä¾› `0` ï¼Œç”±æ­¤å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œå½“ `N` åªæœ‰ä¸€ä½æ—¶è¯¥æ–¹æ³•ä¼šå¤šè®¡ç®—ä¸€ä¸ªæ•°å€¼ `0` ï¼Œéœ€è¦é¢å¤–å»æ‰ã€‚

  ```go
  func atMostNGivenDigitSet(digits []string, n int) int {
  	ints := make([]int, 0)
  	for i, digit := range digits {
  		d, _ := strconv.Atoi(digit)
  		if i == 0 || ints[len(ints)-1] != d {
  			ints = append(ints, d)
  		}
  	}
  
  	base := int(1e9)
  	isFirst := true
  
  	ans := 0
  	for base > 0 {
  		if n/base == 0 {
  			base /= 10
  			continue
  		} else {
  			d := (n / base) % 10
  			i := sort.SearchInts(ints, d)
  			if isFirst {
  				ans += f(base/10, len(ints))
  			}
  			ans += i * f2(base/10, len(ints))
  
  			if i == len(ints) || ints[i] != d {
  				break
  			} else {
  				if base == 1 {
  					ans++
  				}
  				isFirst = false
  				base /= 10
  			}
  		}
  	}
  
  	if n < 10 {
  		ans--
  	}
  	return ans
  }
  
  func f(base, num int) (res int) {
  	item := 1
  	if base == 0 {
  		return 1
  	}
  	for base > 0 {
  		item *= num
  		res += item
  		base /= 10
  	}
  	return
  }
  
  func f2(base, num int) int {
  	item := 1
  	if base == 0 {
  		return 1
  	}
  	for base > 0 {
  		item *= num
  		base /= 10
  	}
  	return item
  }
  ```




#### åŠ¨æ€è§„åˆ’ä¾‹é¢˜

| ID   | LeetCode é¢˜å·                                                | æè¿°                                          | æ€è·¯                                                         |
| ---- | ------------------------------------------------------------ | --------------------------------------------- | ------------------------------------------------------------ |
| 1    | [300. Longest Increasing Subsequence](https://leetcode.cn/problems/longest-increasing-subsequence/) | æœ€é•¿é€’å¢å­åºåˆ—                                | ä¸€ç»´ DPï¼Œ$f[i+1]=\underset{0 \leq j \leq i}{max}\{f[j]\}$    |
| 2    | [1143. Longest Common Subsequence](https://leetcode.cn/problems/longest-common-subsequence/) | æœ€é•¿å…¬å…±å­åºåˆ—                                | äºŒç»´ DPï¼Œ$f[i+1][j+1] = \begin{cases} f[i][j] & str1[i]=str2[j] \\max(f[i+1][j],f[i][j+1]) & str1[i] \ne str2[j] \end{cases}$ |
| 3    | [LCP 64. äºŒå‰æ ‘ç¯é¥°](https://leetcode.cn/problems/U7WvvU/)   | äºŒå‰ç¯æ ‘å¼€å…³é—®é¢˜                              | æ ‘å½¢DPï¼Œé€šè¿‡å­˜å‚¨çŠ¶æ€æ¥å‡å°‘æœç´¢è¿‡ç¨‹ï¼Œå³**è®°å¿†åŒ–æœç´¢**         |
| 4    | [664. Strange Printer](https://leetcode.cn/problems/strange-printer/) | è¦†ç›–æ‰“å°ï¼Œæ±‚æœ€å°æ‰“å°æ¬¡æ•°                      | åŒºé—´DPï¼Œ$dp[i][j] = \begin{cases} dp[i][j-1] & s[i]=s[j] \\ \max_{i \leq k \leq j-1}(dp[i][j],dp[i][k]+dp[k+1][j]) & s[i] \ne s[j] \end{cases}$ |
| 5    | [801. Minimum Swaps To Make Sequences Increasing](https://leetcode.cn/problems/minimum-swaps-to-make-sequences-increasing/) | ä¸¤ä¸ªæ•°ç»„å¯¹åº”ä½ç½®è¿›è¡Œäº¤æ¢                      | DPï¼Œæ»šåŠ¨æ•°ç»„                                                 |
| 6    | [LCP 69. Hello LeetCode!](https://leetcode.cn/problems/rMeRt2/) | å­—å…¸ä¸­å–å­—ç¬¦ï¼Œä»£ä»·æœ€å°                        | DP + çŠ¶æ€å‹ç¼© + DP + DFS                                     |
| 7    | [940. Distinct Subsequences II](https://leetcode.cn/problems/distinct-subsequences-ii/) | ä¸åŒçš„å­åºåˆ—æ•°                                | $dp[i]=\sum_{j='a'}^{'z'}dp[j] \qquad 'a'\leq i \leq 'z'$    |
| 8    | [1235. Maximum Profit in Job Scheduling](https://leetcode.cn/problems/maximum-profit-in-job-scheduling/) | å¯ä»¥å‚åŠ çš„å·¥ä½œçš„æœ€å¤šè–ªèµ„                      | ä»¥ç»“æŸæ—¶é—´æ’åºï¼Œç»“æŸæ—¶é—´ç›¸åŒæ—¶ä»¥ç»å†æ—¶é—´æœ€é•¿ä¸ºåï¼ŒDP + äºŒåˆ†æŸ¥æ‰¾ï¼Œæ³¨æ„äºŒåˆ†æŸ¥æ‰¾çš„å‘ï¼Œå› ä¸ºç»“æŸæ—¶é—´æœ‰é‡å¤ï¼Œéœ€è¦æ‰¾åˆ°æœ€åä¸€ä¸ª... |
| 9    | [2008. Maximum Earnings From Taxi](https://leetcode.cn/problems/maximum-earnings-from-taxi/) | èµšé’±æœ€å¤šçš„æ¥ä¹˜å®¢çš„æ–¹æ¡ˆ                        | åŒä¸Šä¸€é¢˜çš„æ€è·¯                                               |
| 10   | [1751. Maximum Number of Events That Can Be Attended II](https://leetcode.cn/problems/maximum-number-of-events-that-can-be-attended-ii/) | åœ¨é™åˆ¶æ•°é‡çš„æƒ…å†µä¸‹å¯ä»¥å‚åŠ çš„ä¼šè®®çš„æœ€é«˜ä»·å€¼    | åŒä¸Šé¢˜æ€è·¯ï¼Œä¸è¿‡å¢åŠ ä¸€ç»´æ¥è®°å½•å°‘äºç­‰äºé™åˆ¶æ•°é‡æ—¶ï¼Œæ‰€èƒ½è¾¾åˆ°çš„æœ€å¤§ä»·å€¼ |
| 11   | [2054. Two Best Non-Overlapping Events](https://leetcode.cn/problems/two-best-non-overlapping-events/) | åœ¨é™åˆ¶æ•°é‡çš„æƒ…å†µä¸‹å¯ä»¥å‚åŠ çš„ä¼šè®®çš„æœ€é«˜ä»·å€¼    | åŒä¸Šé¢˜ï¼Œä¸è¿‡é™åˆ¶æ•°é‡å›ºå®šåœ¨ $2$ ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Š `CV` å°±è¡Œ        |
| 12   | [902. Numbers At Most N Given Digit Set](https://leetcode.cn/problems/numbers-at-most-n-given-digit-set/) | ç»™å®šéé›¶æ•°å­—æœ€å¤šèƒ½ç»„æˆå¤šå°‘ä¸ªä¸è¶…è¿‡ `N` çš„æ•°å­— | æ ‡å‡†æ•°ä½ DP + äºŒåˆ†æŸ¥æ‰¾                                       |
| 13   | [907. Sum of Subarray Minimums](https://leetcode.cn/problems/sum-of-subarray-minimums/) | å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ                            | DP + å•è°ƒæ ˆ                                                  |
| 14   | [1140. Stone Game II](https://leetcode.cn/problems/stone-game-ii/) | çŸ³å¤´æ¸¸æˆ                                      | çŠ¶æ€å‹ç¼©æœç´¢`DFS`                                            |
| 15   | [174. Dungeon Game](https://leetcode.cn/problems/dungeon-game/) | æœ‰æ‰è¡€æœ‰åŠ è¡€çš„DPåœ°ç‰¢                          | ä¸€ç»´DPä¼˜åŒ–äºŒç»´ï¼Œåå‘è®¡ç®—                                     |
| 16   | [377. Combination Sum IV](https://leetcode.cn/problems/combination-sum-iv/) | é’è›™è·³çš„åŠ å¼ºç‰ˆ                                | ä¸€ç»´DPï¼Œä½†æ˜¯äºŒä½å¾ªç¯                                         |
| 17   | [1039. Minimum Score Triangulation of Polygon](https://leetcode.cn/problems/minimum-score-triangulation-of-polygon/) | å¤šè¾¹å½¢çš„ä¸‰è§’å‰–åˆ†                              | è½¬æ¢æˆåŒºé—´DP                                                 |



| é¢˜                                                | é¢˜                                             | é¢˜                                    | é¢˜                                          |
| ------------------------------------------------- | ---------------------------------------------- | ------------------------------------- | ------------------------------------------- |
| 354. Russian Doll Envelopes                       | Longest Substring Without Repeating Characters | 72. Edit Distance                     | 44. Wildcard Matching                       |
| 10. Regular Expression Matching                   | 647. Palindromic Substrings                    | 5. Longest Palindromic Substring      | 42. Trapping Rain Water                     |
| 1423. Maximum Points You Can Obtain from Cards    | Palindrome problems                            | Prefix sum/max/min                    | Range Sum Query - Immutable                 |
| 304. Range Sum Query 2D - Immutable               | Word Break ç³»åˆ—                                | ç¡¬å¸é›¶é’±ç³»åˆ— Coin Change              | ä¹°è‚¡ç¥¨ç³»åˆ— Best Time to Buy and Sell Stock  |
| è·³è·ƒæ¸¸æˆç³»åˆ— Jump games                           | æŠ¢åŠ«ç³»åˆ— House Robber                          | çŸ³å¤´æ¸¸æˆç³»åˆ—ï¼ˆAlice & Bob) Stone Game | Unique Paths ç³»åˆ—                           |
| 688 Knight Probability in Chessboard              | æ‘˜æ¨±æ¡ƒ Pick cherry                             | 174  Dungeon Game                     | 1277 Count Square Submatrices with All Ones |
| åŠ æ²¹ç«™é—®é¢˜ 871. Minimum Number of Refueling Stops |                                                |                                       |                                             |

